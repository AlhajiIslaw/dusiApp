const allQuizzes = {
  QleksjonEn: [
      {
    question: '1. Hva betyr "Qadar"?',
    options: ['At mennesker bestemmer alt selv', 'At alt er tilfeldig', 'At Allah har bestemt alt som skjer'],
    correct: 2
  },
  {
    question: '2. Hvor mange søyler har troen (iman) ?',
    options: ['tre', 'seks', 'fem'],
    correct: 1
  },
  {
    question: '3. Hvem vet hva som skal skje i framtiden?',
    options: ['Allah', 'Englene', 'Menneskene'],
    correct: 0
  },
  {
    question: '4. Hvor er alt som skal skje skrevet ned?',
    options: ['I Koranen', 'I Den bevarte tavlen (Al-Lawh Al-Mahfudh)', 'I historiebøkene'],
    correct: 1
  },
  {
    question: '5. Hva skriver engelen når et barn er i magen til mamma?',
    options: ['Hva barnet skal hete', 'Hvor lenge barnet skal leve', 'Hva barnet skal studere'],
    correct: 1
  },
  {
    question: '6. Hvem bestemmer når og hvordan ting skjer i livet?',
    options: ['Mennesker', 'Tilfeldigheter', 'Allah'],
    correct: 2
  },
  {
    question: '7. Hva slags ting vet Allah om oss?',
    options: ['Bare det vi sier', 'Alt vi gjør, tenker og føler', 'Bare det som skjer i framtiden'],
    correct: 1
  },
  {
    question: '8. Kan noe skje uten at Allah vet om det?',
    options: ['Ja, mange ting', 'Nei, ingenting skjer uten at Allah vet det', 'Kanskje, det kommer an på'],
    correct: 1
  },
  {
    question: '9. Hva betyr det at vi har ansvar for våre valg?',
    options: [
      'Vi må gjøre alt perfekt',
      'Vi velger selv hva vi gjør, selv om Allah vet hva vi velger',
      'Alt vi gjør er andres feil'
    ],
    correct: 1
  },
  {
    question: '10. Hvorfor er troen på Qadar viktig?',
    options: [
      'Fordi vi da slipper å tenke',
      'Fordi det gir oss tillit til at Allah har kontroll på alt',
      'Fordi vi kan skylde på andre'
    ],
    correct: 1
  }
  ],
  QleksjonTo: [
   {
    question: '1. Hvorfor skapte Allah oss?',
    options: [
      'Allah skapte oss for å prøve hvor sterke vi er',
      'Allah skapte oss for å fylle jorden med mennesker',
      'Allah skapte oss for at vi skal tilbe Ham alene'
    ],
    correct: 2
  },
  {
    question: '2. Hva er de tre grunnleggende prinsippene som enhver tjener må kjenne til?',
    options: [
      'Å kjenne Mekka, Medina og Koranen',
      'Å kjenne bønn, faste og zakat',
      'Å kjenne sin Herre, sin religion og sin profet Muhammed (fred være med ham)'
    ],
    correct: 2
  },
  {
    question: '3. Hvor mange søyler har islam, og hva er de?',
    options: [
      'Fire: bønn, faste, zakat og hajj',
      'Seks: shahada, bønn, faste, zakat, hajj og jihad',
      'Fem: trosbekjennelsen, bønn, zakat, faste i Ramadan og pilegrimsreise'
    ],
    correct: 2
  },
  {
    question: '4. Hvor mange søyler har troen (iman), og hva er de?',
    options: [
      'Fem: Allah, bønn, Koranen, dommens dag og hajj',
      'Sju: Allah, profetene, Koranen, dommens dag, englene, moskeer og bønn',
      'Seks: tro på Allah, englene, bøkene, sendebudene, den siste dagen og forutbestemmelsen'
    ],
    correct: 2
  },
  {
    question: '5. Hva er ihsan?',
    options: [
      'Å gjøre gode gjerninger foran folk',
      'Å følge alle fem søyler av islam nøyaktig',
      'Å tilbe Allah som om du ser Ham, og vite at Han ser deg selv om du ikke ser Ham'
    ],
    correct: 2
  },
  {
    question: '6. Hva betyr "La ilaha illa Allah"?',
    options: [
      'Allah er den største blant gudene',
      'Det finnes mange guder, men Allah er viktigst',
      'Det finnes ingen som med rett kan tilbes unntatt Allah'
    ],
    correct: 2
  }
  ],
  QleksjonThree:[
  {
    "question": "Hvor mange betingelser har «la ilaha illallah»?",
    "options": ["Fem", "Åtte", "Sju"],
    "correct": 1
  },
  {
    "question": "Hvilken av disse er IKKE en av betingelsene for «la ilaha illallah»?",
    "options": ["Tålmodighet", "Kunnskap", "Overbevisning"],
    "correct": 0
  },
  {
    "question": "Hva betyr 'kufr bit-taghoot' i betingelsene for «la ilaha illallah»?",
    "options": [
      "Å elske Allah",
      "Å fornekte falske guder",
      "Å akseptere alle religioner"
    ],
    "correct": 1
  },
  {
    "question": "Hvor mange søyler har «la ilaha illallah»?",
    "options": ["Én", "To", "Tre"],
    "correct": 1
  },
  {
    "question": "Hva er de to søylene i «la ilaha illallah»?",
    "options": [
      "Kunnskap og oppriktighet",
      "Fornektelse og bekreftelse",
      "Aksept og kjærlighet"
    ],
    "correct": 1
  }
], QleksjonFour:[
  {
    "question": "Hva vil det si at Muhammed er Allahs sendebud?",
    "options": [
      "Å tro at han var en god mann",
      "Å følge ham i alt han gjorde uansett kontekst",
      "Å adlyde ham i det han befalte, tro ham i det han informerte om, unngå det han forbød og advarte mot, og at Allah kun skal tilbes slik han har foreskrevet"
    ],
    "correct": 2
  },
  {
    "question": "Hva innebærer å tro på Muhammed som Allahs sendebud?",
    "options": [
      "Å elske ham og nevne navnet hans ofte",
      "Å tro på det han sa, adlyde det han befalte og unngå det han forbød",
      "Å reise til Medina"
    ],
    "correct": 1
  },
  {
    "question": "Hva skal man unngå hvis man følger Muhammed som sendebud?",
    "options": [
      "Alt han forbød og advarte mot",
      "Alt nytt innen teknologi",
      "Folk som ikke er muslimer"
    ],
    "correct": 0
  },
  {
    "question": "Hva skal man kun tilbe Allah med?",
    "options": [
      "Med det man selv føler er rett",
      "Med det Muhammed brakte og foreskrev",
      "Med alt som står i gamle skrifter"
    ],
    "correct": 1
  },
  {
    "question": "Hva er det største Allah har befalt?",
    "options": [
      "Tawhid – å tilbe Allah alene",
      "Å følge alle profetene",
      "Å bygge moskeer"
    ],
    "correct": 0
  },
  {
    "question": "Hva betyr 'tawhid'?",
    "options": [
      "Å gjøre gode gjerninger",
      "Å gi veldedighet",
      "Å tilbe Allah alene"
    ],
    "correct": 2
  }
],
QleksjonFem:[
  {
    "question": "Hva er det største Allah har forbudt?",
    "options": [
      "Å spise svinekjøtt",
      "Shirk – å sette noen ved siden av Allah",
      "Å lyve"
    ],
    "correct": 1
  },
  {
    "question": "Hva betyr shirk?",
    "options": [
      "Å tilbe Allah alene",
      "Å tro på engler",
      "Å sette noen ved siden av Allah"
    ],
    "correct": 2
  },
  {
    "question": "Hva er tawhid?",
    "options": [
      "Å tro på alle profetene",
      "Å tilskrive Allah det som er spesielt for Ham alene i herredømme, guddommelighet, navn og egenskaper",
      "Å følge islams fem søyler"
    ],
    "correct": 1
  },
  {
    "question": "Hvor mange deler består tawhid av?",
    "options": [
      "To",
      "Tre",
      "Fire"
    ],
    "correct": 1
  },
  {
    "question": "Hva handler tawhid ar-Rububiyyah om?",
    "options": [
      "Allahs herredømme",
      "Allahs navn",
      "Profetens liv"
    ],
    "correct": 0
  },
  {
    "question": "Hva handler tawhid al-Uluhiyyah om?",
    "options": [
      "Allahs rett til å bli tilbedt",
      "Profetens budskap",
      "Bønnens betydning"
    ],
    "correct": 0
  }
],
QleksjonSeks:[
  {
    "question": "Hva er nytten av tawhid?",
    "options": [
      "Trygghet i dette livet og rikdom i det neste",
      "Trygghet i det neste liv, veiledning i dette livet og tilgivelse for synder",
      "Tilgang til paradis uten dom"
    ],
    "correct": 1
  },
  {
    "question": "Hva er shirk?",
    "options": [
      "Å følge Profeten",
      "Å tilbe Allah alene",
      "Å sette likestilte med Allah, selv om det er Han som har skapt deg"
    ],
    "correct": 2
  },
  {
    "question": "Hva er konsekvensen av shirk?",
    "options": [
      "Man må faste mer",
      "Å bli nektet paradis og evig straff i Ilden",
      "Man mister veiledning i dette livet"
    ],
    "correct": 1
  },
  {
    "question": "Hva betyr 'taghout'?",
    "options": [
      "Noe man elsker over alt annet",
      "Alt som tilbes, følges eller adlydes uten rett",
      "Navn på en ond ånd i islamsk tro"
    ],
    "correct": 1
  }
],
 QleksjonSyf :[
  {
    question: "Hvor mange ting nevnes som ødelegger islam?",
    options: [
      "Fem",
      "Sju",
      "Ti",
      "Tolv"
    ],
    correct: 2
  },
  {
    question: "Hva er det første som nevnes som ødelegger islam?",
    options: [
      "Å bruke trolldom",
      "Å tilbe noe annet enn Allah",
      "Å gjøre narr av religionen",
      "Å hate det Profeten kom med"
    ],
    correct: 1
  },
  {
    question: "Hva sies om å ikke tro at avgudsdyrkere er utenfor islam?",
    options: [
      "Det er en stor synd og regnes som en av de ti tingene som ødelegger islam",
      "Det er en liten synd",
      "Det er bare feil, men ikke alvorlig",
      "Det har ingen betydning"
    ],
    correct: 0
  },
  {
    question: "Hva er konsekvensen av å gjøre narr av religionen?",
    options: [
      "Det er en liten synd",
      "Det er en alvorlig synd og kan føre til at man ikke lenger regnes som muslim",
      "Det er greit",
      "Det er bare spøk"
    ],
    correct: 1
  },
  {
    question: "Hva sier teksten om trolldom?",
    options: [
      "Det er akseptabelt i noen tilfeller",
      "Det er en sunnah-handling",
      "Det ødelegger islam",
      "Det er bare en kulturell praksis"
    ],
    correct: 2
  }
],


  hadith: [
    {
      question: '1. Hva er Hadith?',
      options: ['Vers fra Koranen', 'Historier fra følgesvennene', 'Profetens ord, handlinger og godkjennelser'],
      correct: 2
    },
    {
      question: '2. Hvorfor er Hadith viktig i islam?',
      options: ['Fordi det er en samling av historier', 'Fordi det forklarer og utdyper Koranens budskap', 'Fordi det ble skrevet først'],
      correct: 1
    },
    {
      question: '3. Hva kalles en person som samler Hadith?',
      options: ['Mujtahid', 'Muhaddith', 'Muadhin'],
      correct: 1
    },
    {
      question: '4. Hvilken bok er kjent som en samling av autentiske Hadither?',
      options: ['Sahih al-Bukhari', 'Tafsir al-Jalalayn', 'Fiqh-us-Sunnah'],
      correct: 0
    },
    {
      question: '5. Hvilket kriterium brukes for å vurdere Hadiths ekthet?',
      options: ['Lengde', 'Kildekjede og innhold', 'Oversettelse'],
      correct: 1
    }
  ],
  fiqh: [
    {
      question: '1. Hva betyr "Fiqh"?',
      options: ['Tale', 'Praktisk forståelse av islamsk lov', 'Tilbedelse'],
      correct: 1
    },
    {
      question: '2. Hvilke kilder brukes i fiqh?',
      options: ['Koranen og Hadith', 'Bibelen og Toraen', 'Avisartikler'],
      correct: 0
    },
    {
      question: '3. Hvilket område dekker fiqh?',
      options: ['Bare bønn og faste', 'Alle aspekter av livet', 'Kun økonomi'],
      correct: 1
    },
    {
      question: '4. Hva er en "Madhhab"?',
      options: ['Et arabisk språk', 'Et fiqh-læresystem', 'Et kapittel i Koranen'],
      correct: 1
    },
    {
      question: '5. Hvorfor er fiqh viktig?',
      options: ['For å kjenne Allahs navn', 'For å vite hvordan man skal handle etter islamsk lov', 'For å lære arabisk grammatikk'],
      correct: 1
    }
  ],
  akhlaaq: [
    {
      question: '1. Hva betyr "Akhlaaq"?',
      options: ['Moral og god karakter', 'Matregler', 'Historier om profeter'],
      correct: 0
    },
    {
      question: '2. Hvem er det beste eksempelet på god akhlaaq?',
      options: ['En lærer', 'Profeten Muhammad ﷺ', 'En dommer'],
      correct: 1
    },
    {
      question: '3. Hvor viktig er akhlaaq i islam?',
      options: ['Lite viktig', 'Bare viktig i bønn', 'Svært viktig og en del av troen'],
      correct: 2
    },
    {
      question: '4. Hva er et eksempel på god akhlaaq?',
      options: ['Å være ærlig og respektfull', 'Å ignorere naboen', 'Å heve stemmen uten grunn'],
      correct: 0
    },
    {
      question: '5. Hva sa Profeten ﷺ om hvorfor han ble sendt?',
      options: ['For å krige', 'For å lære folk tall', 'For å fullkommengjøre god karakter'],
      correct: 2
    }
  ],
  sirah: [
    {
      question: '1. Hva betyr "Sirah"?',
      options: ['Bønnerop', 'Profetens livshistorie', 'En arabisk bok'],
      correct: 1
    },
    {
      question: '2. Hvor ble Profeten Muhammad ﷺ født?',
      options: ['Medina', 'Mekka', 'Damaskus'],
      correct: 1
    },
    {
      question: '3. Hva lærer vi fra Profetens sirah?',
      options: ['Matlaging', 'Hvordan leve islam i praksis', 'Hvordan skrive poesi'],
      correct: 1
    },
    {
      question: '4. Hva kalles Profetens utvandring til Medina?',
      options: ['Hajj', 'Hijrah', 'Umrah'],
      correct: 1
    },
    {
      question: '5. Hvorfor er Sirah viktig å studere?',
      options: ['For å forstå historien', 'For å følge Profetens eksempel', 'For å lære geografi'],
      correct: 1
    }
  ],
  quran: [
    {
      question: '1. Hva er Koranen?',
      options: ['Et dikt', 'Allahs åpenbarte ord', 'En bok skrevet av mennesker'],
      correct: 1
    },
    {
      question: '2. Hvem mottok Koranen?',
      options: ['Profeten Isa', 'Profeten Muhammad ﷺ', 'Profeten Musa'],
      correct: 1
    },
    {
      question: '3. Hva er hovedtemaet i Koranen?',
      options: ['Historie', 'Veiledning for livet og troen', 'Eventyr'],
      correct: 1
    },
    {
      question: '4. På hvilket språk ble Koranen åpenbart?',
      options: ['Hebraisk', 'Persisk', 'Arabisk'],
      correct: 2
    },
    {
      question: '5. Hva er en "surah"?',
      options: ['Et kapittel i Koranen', 'En bønn', 'En type mat'],
      correct: 0
    },
    
    
  ], 
    tafsir: [
    {
      question: '1. Hva er Tafsir?',
      options: [
        'En samling hadith',
        'Vitenskapen om å tolke og forklare Koranen',
        'En islamsk lovbok'
      ],
      correct: 1
    },
    {
      question: '2. Hvorfor er Tafsir viktig?',
      options: [
        'Fordi det hjelper oss å forstå Koranens dype mening og kontekst',
        'Fordi det lærer oss å snakke arabisk',
        'Fordi det inneholder historier fra profetene'
      ],
      correct: 0
    },
    {
      question: '3. Hva forklarer Tafsir blant annet?',
      options: [
        'Hvordan man bygger moskeer',
        'Hvorfor og hvordan vers ble åpenbart',
        'Hvordan man lager islamsk mat'
      ],
      correct: 1
    },
    {
      question: '4. Hva kan gå tapt uten Tafsir?',
      options: [
        'Språkkunnskaper',
        'Profetenes liv',
        'Koranens visdom og kontekst'
      ],
      correct: 2
    },
    {
      question: '5. Hvem trenger Tafsir?',
      options: [
        'Kun imamer og lærde',
        'Alle som ønsker å følge islamsk veiledning korrekt',
        'Bare barn i dugsi'
      ],
      correct: 1
    }
  ]
  
};


  const quizButtons = document.querySelectorAll(".quiz__btn");
const popupWrapper = document.querySelector(".wrapper");
const closes = document.querySelector(".popupclose");

const quizContainer = document.getElementById('quiz');
const resultContainer = document.getElementById('quiz-result');

let questions = [];
let currentQuestion = 0;
let userAnswers = [];

quizButtons.forEach(b => {
  b.addEventListener("click", (e) => {
    e.preventDefault();
    const quizKey = b.dataset.quiz;

    if (!allQuizzes[quizKey]) {
      alert("Quiz ikke funnet.");
      return;
    }

    questions = allQuizzes[quizKey];
    currentQuestion = 0;
    userAnswers = [];

    popupWrapper.style.display = 'block';
    document.querySelector(".quiz-buttons").style.display = "block";
    resultContainer.style.display = "none";
    loadQuestion();
  });
});

closes.addEventListener("click", () => {
  popupWrapper.style.display = 'none';
});


function loadQuestion() {
  const q = questions[currentQuestion];
  const userAnswer = userAnswers[currentQuestion];

  quizContainer.innerHTML = `
    <div class="question" style="margin-bottom:10px;"><strong>${q.question}</strong></div>
    <div class="answers">
      ${q.options.map((opt, i) => `
        <label style="display:block; margin-bottom:5px;">
          <input type="radio" name="answer" value="${i}" ${userAnswer == i ? 'checked' : ''}>
          <span>${opt}</span>
        </label>
      `).join('')}
      <div id="feedback" style="margin-top:10px;"></div>
    </div>
  `;

  document.querySelectorAll('input[name="answer"]').forEach(radio => {
    radio.addEventListener('change', checkAnswer);
  });

  document.getElementById('prevBtn').style.display = currentQuestion === 0 ? 'none' : 'inline-block';
  document.getElementById('nextBtn').textContent = currentQuestion === questions.length - 1 ? 'Fullfør' : 'Neste';
}

function checkAnswer() {
  const selected = document.querySelector('input[name="answer"]:checked');
  const feedback = document.getElementById('feedback');
  if (!selected) return;

  const selectedVal = parseInt(selected.value);
  userAnswers[currentQuestion] = selectedVal;

  const isCorrect = selectedVal === questions[currentQuestion].correct;

  feedback.textContent = isCorrect ? '✅ Riktig!' : '❌ Feil. Prøv igjen!';
  feedback.style.color = isCorrect ? 'green' : 'red';

  document.querySelectorAll('label').forEach((label, idx) => {
    label.style.backgroundColor = '';
    if (idx === questions[currentQuestion].correct) {
      label.style.backgroundColor = '#d4edda'; // grønn
    }
    if (idx === selectedVal && !isCorrect) {
      label.style.backgroundColor = '#f8d7da'; // rød
    }
  });
}

document.getElementById('nextBtn').addEventListener('click', () => {
  const selected = document.querySelector('input[name="answer"]:checked');
  if (!selected) {
    alert('Vennligst velg et svar før du går videre.');
    return;
  }

  const selectedVal = parseInt(selected.value);
  userAnswers[currentQuestion] = selectedVal;

  if (currentQuestion < questions.length - 1) {
    currentQuestion++;
    loadQuestion();
  } else {
    showFinalResult();
  }
});

document.getElementById('prevBtn').addEventListener('click', () => {
  if (currentQuestion > 0) {
    currentQuestion--;
    loadQuestion();
  }
});

function showFinalResult() {
  quizContainer.innerHTML = '';
  document.querySelector('.quiz-buttons').style.display = 'none';
  resultContainer.style.display = 'block';

  let correctCount = 0;

  const reviewHtml = questions.map((q, index) => {
    const userAnswer = userAnswers[index];
    const correctAnswer = q.correct;
    const isCorrect = userAnswer === correctAnswer;

    if (isCorrect) correctCount++;

    return `
      <div style="margin-bottom: 1rem; padding: 10px; border-left: 5px solid ${isCorrect ? 'green' : 'red'}; background: ${isCorrect ? '#e0ffe0' : '#ffe0e0'};">
        <strong>${q.question}</strong><br>
        Ditt svar: ${userAnswer != null ? q.options[userAnswer] : '<em>Ikke svart</em>'}<br>
        Riktig svar: ${q.options[correctAnswer]}
      </div>
    `;
  }).join('');

  resultContainer.innerHTML = `
    <h3>✅ Du fikk ${correctCount} av ${questions.length} riktige!</h3>
    <h4>📋 Gjennomgang:</h4>
    ${reviewHtml}
  `;
}
